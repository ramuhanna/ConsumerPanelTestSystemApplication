@model IEnumerable<ConsumerPanelTestSystemApplication.ViewModels.CPTRequestViewModel>

@{
    ViewBag.Title = "Pending Requests";
}

<h2>Pending Requests</h2>

<h4>Requests to be reviewed.</h4>

<table class="table">
    <tr>
        <th>
            @Html.DisplayNameFor(model => model.RequestTitle)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.RequestDate)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.RequestStatus)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.ProductDivision)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Justification)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.MDecisionId)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.MReviewRequest)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.BEmployeeId)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.BReviewRequest)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.BrandManagerReviewRequest)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.BDecisionId)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.REmployeeId)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.BDecisionMade)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.BDecisionDate)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.BReview)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.MDecision)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.MDecisionDate)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.MReview)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.LocationId)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.SubmittedByName)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.SubmittedById)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.City)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.BrandManagerName)
        </th>
        <th></th>
    </tr>

@foreach (var item in Model) {
    <tr>
        <td>
            @Html.DisplayFor(modelItem => item.RequestTitle)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.RequestDate)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.RequestStatus)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.ProductDivision)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Justification)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.MDecisionId)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.MReviewRequest)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.BEmployeeId)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.BReviewRequest)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.BrandManagerReviewRequest)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.BDecisionId)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.REmployeeId)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.BDecisionMade)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.BDecisionDate)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.BReview)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.MDecision)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.MDecisionDate)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.MReview)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.LocationId)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.SubmittedByName)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.SubmittedById)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.City)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.BrandManagerName)
        </td>
        <td>
            @Html.ActionLink("Edit", "Edit", new { id=item.Id }) |
            @Html.ActionLink("Details", "Details", new { id=item.Id }) |
            @Html.ActionLink("Delete", "Delete", new { id=item.Id })
        </td>

        <td>
            @Html.ActionLink("View Request Details", "PendingRequestsDetails", new { id = item.Id }, new { @class = "btn btn-sm btn-info" })

            @if (item.RequestStatus == ConsumerPanelTestSystemApplication.Models.RequestStatus.BMRequestApproval)
            {
                @Html.ActionLink("Review Request", "BrandManagerReview", new { id = item.Id }, new { @class = "btn btn-sm btn-success" })
            }

            @if (item.QuestionnaireExist == true)
                {
                    if ((item.RequestStatus != ConsumerPanelTestSystemApplication.Models.RequestStatus.BMRequestApproval) && (item.RequestStatus != ConsumerPanelTestSystemApplication.Models.RequestStatus.MDRequestApproval) && (item.RequestStatus != ConsumerPanelTestSystemApplication.Models.RequestStatus.QuestionnaireCreation))
                    {
                    @Html.ActionLink("Questionnaire Details", "ReviewDetails", "Questionnaire", new { id = item.Id }, new { @class = "btn btn-sm btn-info" })
                }
                @*else if (User.IsInRole("Marketing Director") && item.RequestStatus != ConsumerPanelTestSystemApplication.Models.RequestStatus.BMRequestApproval && item.RequestStatus != ConsumerPanelTestSystemApplication.Models.RequestStatus.MDRequestApproval && item.RequestStatus != ConsumerPanelTestSystemApplication.Models.RequestStatus.QuestionnaireCreation && item.RequestStatus != ConsumerPanelTestSystemApplication.Models.RequestStatus.BMQuestionnaireApproval)
                {
                    @Html.ActionLink("Questionnaire Details", "ReviewDetails", "Questionnaire", new { id = item.Id }, new { @class = "btn btn-sm btn-info" })
                }*@

            }
        </td>

    </tr>
}

</table>
